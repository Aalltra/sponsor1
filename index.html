<html lang="fr">
<base href="https://aalltra.github.io/sponsor1/">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurateur PC - QMD</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0a1929;
            --secondary-color: #1e88e5;
            --accent-color: #00e5ff;
            --background-color: #0d1117;
            --text-color: #e0e0e0;
            --card-bg: rgba(30, 41, 59, 0.85);
            --sidebar-bg: #1a2332;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --transition-speed: 0.3s;
            --font-family-primary: 'Poppins', sans-serif;
            --font-family-secondary: 'Roboto', sans-serif;
            --max-width: 1400px;
            --header-height: 70px;
            --shadow-color: rgba(0, 229, 255, 0.3);
            --border-radius: 1.5rem;
            --nav-hover-bg: rgba(30, 136, 229, 0.2);
            --nav-active-bg: rgba(0, 229, 255, 0.2);
            --nav-active-shadow: 0 4px 15px rgba(0, 229, 255, 0.3);
            --button-hover-bg: #00bcd4;
            --modal-bg: rgba(255, 255, 255, 0.95);
            --modal-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --overlay-bg: rgba(0, 0, 0, 0.6);
            --transition-ease: cubic-bezier(0.4, 0, 0.2, 1);
            --gradient-primary: linear-gradient(135deg, #021B3D, #0a1929);
            --gradient-secondary: linear-gradient(135deg, #1e88e5, #00e5ff);
            --gradient-accent: linear-gradient(45deg, #00ffd5, #00e5ff);
            --header-gradient: linear-gradient(135deg, #021B3D, #1e88e5, #00e5ff);
            --nav-gradient-active: linear-gradient(90deg, #1e88e5, #00e5ff);
            --button-gradient: linear-gradient(135deg, #1e88e5, #00e5ff);
            --button-gradient-hover: linear-gradient(135deg, #00e5ff, #1e88e5);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family-primary);
            background-color: var(--background-color);
            color: var(--text-color);
            transition: background-color var(--transition-speed), color var(--transition-speed);
            line-height: 1.6;
            overflow-x: hidden;
        }

        a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color var(--transition-speed), transform var(--transition-speed);
            position: relative;
        }

        a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            background: var(--accent-color);
            left: 50%;
            bottom: -3px;
            transition: width var(--transition-speed), left var(--transition-speed);
        }

        a:hover::after,
        a.active::after {
            width: 100%;
            left: 0;
        }

        a:hover {
            color: var(--secondary-color);
            transform: scale(1.05);
        }

        .container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: var(--header-gradient);
            border-bottom: 2px solid var(--accent-color);
            backdrop-filter: blur(10px);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2), 0 0 20px var(--accent-color);
            position: sticky;
            top: 0;
            z-index: 1000;
            animation: fadeInDown 1s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            width: 100%;
        }

        h1 {
            font-family: var(--font-family-secondary);
            font-weight: 700;
            font-size: 2.5rem;
            margin: 0;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
            transition: text-shadow var(--transition-speed), transform var(--transition-speed);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        h1:hover {
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
            transform: scale(1.02);
        }

        .header-icon {
            font-size: 2.5rem;
            color: var(--accent-color);
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
            transition: color var(--transition-speed), text-shadow var(--transition-speed), transform var(--transition-speed);
            cursor: pointer;
            animation: float 3s ease-in-out infinite;
        }

        .header-icon:hover {
            color: var(--secondary-color);
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
            transform: rotate(10deg);
        }

        @keyframes float {
            0% {
                transform: translatey(0px);
            }
            50% {
                transform: translatey(-10px);
            }
            100% {
                transform: translatey(0px);
            }
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            height: 6px;
            margin-top: 1rem;
            border-radius: 3px;
            overflow: hidden;
            position: relative;
            width: 100%;
        }

        .progress {
            height: 100%;
            background: var(--gradient-secondary);
            box-shadow: 0 0 20px var(--accent-color);
            animation: pulse 2s infinite;
            transition: width var(--transition-speed) ease-in-out, box-shadow var(--transition-speed);
            width: 0%;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 10px var(--accent-color); }
            50% { box-shadow: 0 0 30px var(--accent-color); }
            100% { box-shadow: 0 0 10px var(--accent-color); }
        }

        nav {
            background-color: var(--sidebar-bg);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: calc(var(--header-height) + 1rem);
            z-index: 999;
            animation: slideInLeft 0.5s ease-out;
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: border-radius var(--transition-speed), box-shadow var(--transition-speed);
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .nav-tabs {
            display: flex;
            list-style-type: none;
            padding: 0;
            margin: 0;
            overflow-x: auto;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-tabs li {
            flex: 1;
            text-align: center;
            transition: background var(--transition-speed);
        }

        .nav-tabs a {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
            text-decoration: none;
            color: #bdc3c7;
            transition: all var(--transition-speed) ease;
            font-family: var(--font-family-secondary);
            font-weight: 500;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            border-radius: var(--border-radius);
            animation: float 3s ease-in-out infinite;
        }

        .nav-tabs a:hover,
        .nav-tabs a.active {
            background: var(--nav-active-bg);
            border-color: var(--accent-color);
            box-shadow: var(--nav-active-shadow);
            color: white;
            transform: scale(1.05);
        }

        .nav-tabs a:hover::after,
        .nav-tabs a.active::after {
            width: 100%;
        }

        .nav-tabs a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: var(--accent-color);
            transition: 0.3s;
            transform: translateX(-50%);
        }

        .nav-tabs a i {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .nav-tabs a:hover i,
        .nav-tabs a.active i {
            color: var(--secondary-color);
            transform: rotate(10deg);
        }

        main {
            display: flex;
            padding: 3rem 0;
            animation: fadeIn 1s ease-out;
            gap: 2rem;
            flex-wrap: wrap;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .component-list {
            flex: 3;
            margin-right: 2rem;
            transition: margin var(--transition-speed);
        }

        .filters {
            background: rgba(30, 41, 59, 0.85);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            margin-bottom: 2.5rem;
            transition: background var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            backdrop-filter: blur(5px);
            border: 2px solid var(--accent-color);
        }

        .filters:hover {
            background-color: rgba(30, 41, 59, 0.95);
            box-shadow: 0 10px 30px rgba(0, 229, 255, 0.2);
            transform: translateY(-5px);
        }

        .search-bar {
            width: 100%;
            padding: 0.85rem 1.2rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            font-size: 1.1rem;
            background: var(--card-bg);
            color: var(--text-color);
            backdrop-filter: blur(5px);
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.1);
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            outline: none;
        }

        .search-bar::placeholder {
            color: var(--text-color);
            opacity: 0.7;
        }

        .search-bar:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
            transform: scale(1.02);
        }

        .filter-options, .sort-options {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .filter-options select, .sort-options select {
            padding: 0.6rem 1.2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.5rem;
            font-size: 1rem;
            background: rgba(30, 41, 59, 0.8);
            color: var(--text-color);
            backdrop-filter: blur(5px);
            cursor: pointer;
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            outline: none;
        }

        .filter-options select:focus, .sort-options select:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 15px rgba(0, 229, 255, 0.3);
            transform: scale(1.02);
        }

        .components-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2.5rem;
            transition: grid-template-columns var(--transition-speed), gap var(--transition-speed);
        }

        .component-card {
            background: var(--card-bg);
            border: 1px solid rgba(0, 229, 255, 0.3);
            backdrop-filter: blur(12px);
            box-shadow: 0 8px 40px rgba(0, 229, 255, 0.2);
            padding: 2rem;
            display: flex;
            flex-direction: column;
            border-radius: var(--border-radius);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s, border-color var(--transition-speed);
            overflow: hidden;
            position: relative;
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.95), rgba(17, 25, 40, 0.95));
            cursor: pointer;
            animation: float 6s ease-in-out infinite;
        }

        .component-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: var(--gradient-accent);
            opacity: 0;
            transition: opacity var(--transition-speed);
            z-index: 0;
            transform: rotate(45deg);
        }

        .component-card:hover::before {
            opacity: 0.1;
        }

        .component-card img {
            width: 100%;
            height: 220px;
            object-fit: contain;
            margin-bottom: 1.5rem;
            border-radius: 1rem;
            transition: transform 0.3s ease, filter 0.3s ease;
            position: relative;
            z-index: 1;
            background: #fff;
        }

        .component-card:hover img {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        .component-card h3 {
            font-family: var(--font-family-secondary);
            font-weight: 700;
            font-size: 1.5rem;
            margin: 0 0 1rem 0;
            color: var(--accent-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
            z-index: 1;
            position: relative;
        }

        .component-card:hover h3 {
            color: var(--secondary-color);
            transform: translateY(-3px);
        }

        .component-card ul {
            list-style-type: none;
            padding: 0;
            margin: 0 0 1.5rem 0;
            z-index: 1;
            position: relative;
        }

        .component-card li {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            font-size: 1rem;
            color: var(--text-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .component-card li:hover {
            color: var(--accent-color);
            transform: scale(1.02);
        }

        .component-card li i {
            margin-right: 0.5rem;
            color: var(--secondary-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .component-card li:hover i {
            color: var(--accent-color);
            transform: rotate(10deg);
        }

        .component-card .price {
            font-family: var(--font-family-secondary);
            font-weight: 700;
            font-size: 1.6rem;
            color: var(--accent-color);
            margin-bottom: 1.5rem;
            transition: color var(--transition-speed), transform var(--transition-speed);
            z-index: 1;
            position: relative;
        }

        .component-card:hover .price {
            color: var(--secondary-color);
            transform: scale(1.05);
        }

        .component-card .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: auto;
            gap: 0.5rem;
            z-index: 1;
            position: relative;
        }

        .component-card button {
            flex: 1;
            background: var(--button-gradient);
            border: none;
            backdrop-filter: blur(5px);
            color: white;
            padding: 0.85rem 1rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: var(--font-family-secondary);
            font-weight: 700;
            font-size: 1rem;
            transition: all var(--transition-speed) ease, transform var(--transition-speed);
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        .component-card button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.5s;
            z-index: 0;
        }

        .component-card button:hover::before {
            left: 100%;
        }

        .component-card button:hover {
            box-shadow: 0 4px 20px var(--shadow-color);
            transform: translateY(-3px);
            background: var(--button-gradient-hover);
        }

        .configuration-summary {
            flex: 1;
            padding: 2rem;
            background: linear-gradient(145deg, rgba(26, 35, 50, 0.95), rgba(17, 25, 40, 0.95));
            border: 1px solid rgba(0, 229, 255, 0.3);
            backdrop-filter: blur(12px);
            color: white;
            border-radius: var(--border-radius);
            position: sticky;
            top: 3rem;
            align-self: flex-start;
            max-height: calc(100vh - 6rem);
            overflow-y: auto;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            transition: background var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            animation: fadeIn 1s ease-out;
        }

        .configuration-summary:hover {
            background: linear-gradient(145deg, rgba(26, 35, 50, 0.98), rgba(17, 25, 40, 0.98));
            box-shadow: 0 10px 30px rgba(0, 229, 255, 0.3);
            transform: translateY(-5px);
        }

        .configuration-summary h2 {
            font-family: var(--font-family-secondary);
            font-weight: 700;
            font-size: 1.8rem;
            margin-bottom: 1.8rem;
            color: var(--accent-color);
            text-align: center;
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .configuration-summary h2:hover {
            color: var(--secondary-color);
            transform: scale(1.02);
        }

        .selected-components {
            list-style-type: none;
            padding: 0;
            margin: 0 0 2rem 0;
        }

        .selected-components li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.2rem;
            padding: 0.85rem 1rem;
            border-radius: 0.75rem;
            background: rgba(30, 41, 59, 0.7);
            transition: background var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
            position: relative;
        }

        .selected-components li:hover {
            background: rgba(0, 229, 255, 0.1);
            transform: translateX(5px);
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        .selected-components li span {
            display: flex;
            align-items: center;
            font-size: 1.1rem;
            transition: transform var(--transition-speed);
        }

        .selected-components li span i {
            margin-right: 0.6rem;
            color: var(--secondary-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .selected-components li span:hover i {
            color: var(--accent-color);
            transform: rotate(15deg);
        }

        .selected-components li .price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .selected-components li .price:hover {
            color: var(--secondary-color);
            transform: scale(1.05);
        }

        .selected-components li a {
            display: inline-block;
            padding: 0.3rem 0.6rem;
            background: var(--secondary-color);
            color: white;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            transition: background var(--transition-speed), transform var(--transition-speed);
            text-decoration: none;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .selected-components li:hover a {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .selected-components li a:hover {
            background: var(--accent-color);
            transform: translateY(-2px);
        }

        .total-price {
            font-family: var(--font-family-secondary);
            font-weight: 700;
            font-size: 1.8rem;
            margin-bottom: 2rem;
            padding-bottom: 1.8rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            color: var(--accent-color);
            text-align: center;
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .total-price:hover {
            color: var(--secondary-color);
            transform: scale(1.05);
        }

        .summary-buttons {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin-top: 2rem;
            transition: transform var(--transition-speed);
            animation: fadeIn 1s ease-out;
        }

        .summary-buttons button {
            padding: 0.85rem 1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: var(--font-family-secondary);
            font-weight: 700;
            font-size: 1rem;
            transition: all var(--transition-speed) ease, transform var(--transition-speed);
            text-transform: uppercase;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--button-gradient);
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        .summary-buttons button:first-child {
            background: var(--button-gradient);
            transition: background var(--transition-speed), transform var(--transition-speed);
        }

        .summary-buttons button:first-child:hover {
            background: var(--button-gradient-hover);
            transform: translateY(-3px);
        }

        .summary-buttons button:last-child {
            background: var(--button-gradient);
            transition: background var(--transition-speed), transform var(--transition-speed);
        }

        .summary-buttons button:last-child:hover {
            background: var(--button-gradient-hover);
            transform: translateY(-3px);
        }

        #budget-chart {
            width: 100%;
            height: 250px;
            margin-top: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 1rem;
            transition: background var(--transition-speed), transform var(--transition-speed);
            display: none;
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        #budget-chart:hover {
            background: rgba(0, 0, 0, 0.1);
            transform: scale(1.02);
        }

        .performance-widget {
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-top: 2rem;
            transition: background var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            display: none;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .performance-widget:hover {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 30px rgba(0, 229, 255, 0.2);
            transform: translateY(-5px);
        }

        .performance-widget h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--secondary-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .performance-widget h3:hover {
            color: var(--accent-color);
            transform: scale(1.02);
        }

        .performance-score {
            font-size: 3rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--success-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
            text-shadow: 2px 2px 10px rgba(0, 229, 255, 0.5);
        }

        .performance-score:hover {
            color: var(--secondary-color);
            transform: scale(1.05);
        }

        .performance-categories {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            transition: flex-direction var(--transition-speed), gap var(--transition-speed);
        }

        .performance-category {
            text-align: center;
            flex: 1;
            transition: transform var(--transition-speed), color var(--transition-speed);
            cursor: pointer;
        }

        .performance-category:hover {
            transform: scale(1.05);
        }

        .performance-category i {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .performance-category:hover i {
            color: var(--accent-color);
            transform: rotate(10deg);
        }

        .performance-category p {
            font-size: 1.1rem;
            color: var(--text-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .performance-category p:hover {
            color: var(--accent-color);
            transform: translateY(-2px);
        }

        .game-fps {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 1.5rem;
            transition: flex-direction var(--transition-speed), gap var(--transition-speed);
        }

        .game-fps div {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(30, 41, 59, 0.7);
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            transition: background var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
            position: relative;
        }

        .game-fps div:hover {
            background: rgba(0, 229, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.3);
        }

        .game-fps img {
            width: 32px;
            height: 32px;
            object-fit: contain;
            border-radius: 50%;
            background: white;
            padding: 0.2rem;
            transition: transform var(--transition-speed);
        }

        .game-fps img:hover {
            transform: rotate(15deg);
        }

        .game-fps span {
            font-weight: 600;
            color: var(--accent-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .game-fps span:hover {
            color: var(--secondary-color);
            transform: scale(1.05);
        }

        .summary-3d-view {
            width: 100%;
            height: 350px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            margin-top: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.3rem;
            color: var(--accent-color);
            transition: background var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
            display: none;
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        .summary-3d-view:hover {
            background: rgba(0, 0, 0, 0.1);
            transform: scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 229, 255, 0.3);
        }

        .summary-actions {
            display: flex;
            gap: 1.5rem;
            margin-top: 2rem;
            flex-direction: row;
            transition: flex-direction var(--transition-speed), gap var(--transition-speed);
            display: none;
        }

        .summary-actions button {
            flex: 1;
            padding: 0.85rem 1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: var(--font-family-secondary);
            font-weight: 700;
            font-size: 1rem;
            transition: all var(--transition-speed) ease, transform var(--transition-speed);
            text-transform: uppercase;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--button-gradient);
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        .summary-actions button:nth-child(1) {
            background-color: var(--info-color);
            transition: background-color var(--transition-speed), transform var(--transition-speed);
        }

        .summary-actions button:nth-child(1):hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }

        .summary-actions button:nth-child(2) {
            background-color: var(--danger-color);
            transition: background-color var(--transition-speed), transform var(--transition-speed);
        }

        .summary-actions button:nth-child(2):hover {
            background-color: #ff6b6b;
            transform: translateY(-3px);
        }

        .summary-actions button:nth-child(3) {
            background-color: var(--success-color);
            transition: background-color var(--transition-speed), transform var(--transition-speed);
        }

        .summary-actions button:nth-child(3):hover {
            background-color: #28a745;
            transform: translateY(-3px);
        }

        .financing-calculator {
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-top: 2rem;
            transition: background var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            display: none;
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        .financing-calculator:hover {
            background: rgba(0, 0, 0, 0.1);
            box-shadow: 0 8px 20px rgba(0, 229, 255, 0.3);
            transform: scale(1.02);
        }

        .financing-calculator h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--secondary-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .financing-calculator h3:hover {
            color: var(--accent-color);
            transform: scale(1.02);
        }

        .financing-calculator input {
            width: 100%;
            padding: 0.8rem 1.2rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 0.5rem;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            outline: none;
        }

        .financing-calculator input::placeholder {
            color: rgba(224, 224, 224, 0.7);
        }

        .financing-calculator input:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.3);
            transform: scale(1.02);
        }

        .financing-calculator button {
            width: 100%;
            padding: 0.85rem 1rem;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 700;
            transition: background var(--transition-speed), transform var(--transition-speed);
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        .financing-calculator button:hover {
            background: #c0392b;
            transform: translateY(-3px);
        }

        .monthly-payment {
            font-size: 1.6rem;
            font-weight: 700;
            text-align: center;
            margin-top: 1.5rem;
            color: var(--success-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.3);
        }

        .monthly-payment:hover {
            color: var(--secondary-color);
            transform: scale(1.05);
        }

        .recommendation-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-top: 2.5rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            transition: background var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            transition-delay: 0.2s;
            animation: fadeIn 1s ease-out;
        }

        .recommendation-section:hover {
            background: rgba(30, 41, 59, 0.9);
            box-shadow: 0 10px 30px rgba(0, 229, 255, 0.3);
            transform: translateY(-5px);
        }

        .recommendation-section h3 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            text-align: center;
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .recommendation-section h3:hover {
            color: var(--accent-color);
            transform: scale(1.02);
        }

        .recommendation-cards {
            display: flex;
            gap: 1.5rem;
            overflow-x: auto;
            padding-bottom: 1.5rem;
            transition: gap var(--transition-speed);
        }

        .recommendation-card {
            background: var(--sidebar-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 229, 255, 0.2);
            padding: 1.5rem;
            width: 220px;
            flex-shrink: 0;
            position: relative;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed), background var(--transition-speed);
            cursor: pointer;
            background: rgba(26, 35, 50, 0.95);
            animation: float 4s ease-in-out infinite;
        }

        .recommendation-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: var(--gradient-accent);
            opacity: 0;
            transition: opacity var(--transition-speed);
            z-index: 0;
            transform: rotate(45deg);
        }

        .recommendation-card:hover::before {
            opacity: 0.1;
        }

        .recommendation-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0, 229, 255, 0.3);
            background: rgba(26, 35, 50, 0.98);
        }

        .recommendation-badge {
            position: absolute;
            top: -10px;
            left: -10px;
            background: var(--accent-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            transition: background var(--transition-speed), transform var(--transition-speed);
            cursor: default;
        }

        .recommendation-card:hover .recommendation-badge {
            background: var(--secondary-color);
            transform: rotate(10deg);
        }

        .recommendation-card img {
            width: 100%;
            height: 120px;
            object-fit: contain;
            margin-bottom: 1rem;
            border-radius: 1rem;
            transition: transform var(--transition-speed), filter var(--transition-speed);
            position: relative;
            z-index: 1;
            background: #fff;
        }

        .recommendation-card:hover img {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        .recommendation-card h4 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
            z-index: 1;
            position: relative;
        }

        .recommendation-card:hover h4 {
            color: var(--accent-color);
            transform: translateY(-2px);
        }

        .recommendation-card p {
            font-size: 1rem;
            color: var(--text-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
            z-index: 1;
            position: relative;
        }

        .recommendation-card p:hover {
            color: var(--accent-color);
            transform: scale(1.02);
        }

        .theme-selector {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--card-bg);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 1000;
            transition: background-color var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            animation: float 5s ease-in-out infinite;
        }

        .theme-selector:hover {
            background: var(--accent-color);
            box-shadow: 0 10px 30px rgba(0, 229, 255, 0.4);
            transform: rotate(20deg);
        }

        .theme-selector i {
            font-size: 28px;
            color: var(--primary-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .theme-selector:hover i {
            color: white;
            transform: scale(1.1);
        }

        .theme-options {
            position: absolute;
            bottom: 80px;
            right: 0;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            gap: 1rem;
            transition: opacity var(--transition-speed), transform var(--transition-speed);
            z-index: 1001;
        }

        .theme-options.show {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .theme-option {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: background-color var(--transition-speed), transform var(--transition-speed);
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
        }

        .theme-option:hover {
            background: rgba(0, 229, 255, 0.2);
            transform: scale(1.02);
        }

        .theme-color {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 0.75rem;
            border: 2px solid white;
            transition: transform var(--transition-speed);
        }

        .theme-option:hover .theme-color {
            transform: rotate(20deg);
        }

        .theme-option span {
            font-size: 1rem;
            color: var(--text-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .theme-option:hover span {
            color: white;
            transform: translateX(2px);
        }

        .custom-theme-inputs {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            transition: transform var(--transition-speed);
            margin-top: 1rem;
        }

        .custom-theme-inputs input[type="color"] {
            width: 100%;
            height: 40px;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        .custom-theme-inputs input[type="color"]:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px var(--accent-color);
        }

        @media (max-width: 1024px) {
            main {
                flex-direction: column;
            }

            .component-list {
                margin-right: 0;
            }

            .configuration-summary {
                position: static;
                max-height: none;
                margin-top: 2rem;
            }

            .components-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 2rem;
            }

            .component-card {
                padding: 1.5rem;
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .nav-tabs {
                justify-content: space-around;
            }

            .performance-widget,
            #budget-chart,
            .summary-3d-view,
            .summary-actions,
            .financing-calculator {
                display: block;
            }
        }

        @media (max-width: 768px) {
            .theme-selector {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
            }

            .theme-selector i {
                font-size: 24px;
            }

            .theme-options {
                bottom: 70px;
                right: 0;
                padding: 1rem;
                gap: 0.5rem;
            }

            .theme-option {
                padding: 0.4rem 0.8rem;
            }

            .custom-theme-inputs input[type="color"] {
                height: 35px;
            }

            .components-grid {
                grid-template-columns: 1fr;
            }

            .performance-categories {
                flex-direction: column;
                gap: 1rem;
            }

            .game-fps {
                flex-direction: column;
                gap: 1rem;
            }

            .summary-actions {
                flex-direction: column;
            }

            .summary-actions button {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }

            .header-icon {
                font-size: 2rem;
            }

            .nav-tabs a i {
                font-size: 1.5rem;
            }

            .component-card h3 {
                font-size: 1.3rem;
            }

            .component-card ul li {
                font-size: 0.9rem;
            }

            .component-card .price {
                font-size: 1.3rem;
            }

            .performance-score {
                font-size: 2.5rem;
            }

            .performance-widget h3 {
                font-size: 1.3rem;
            }

            .monthly-payment {
                font-size: 1.3rem;
            }

            .recommendation-section h3 {
                font-size: 1.6rem;
            }

            .theme-options {
                padding: 0.8rem;
                gap: 0.3rem;
            }

            .theme-option {
                padding: 0.3rem 0.6rem;
            }

            .custom-theme-inputs input[type="color"] {
                height: 30px;
            }

            .components-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--background-color);
            border-radius: var(--border-radius);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: var(--border-radius);
            transition: background var(--transition-speed);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        #comparisonModal .modal-content {
            max-height: 90vh;
            overflow-y: auto;
            animation: zoomIn 0.3s ease-out;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--border-radius);
            color: var(--primary-color);
            border: 1px solid var(--secondary-color);
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.7);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .summary-buttons button i {
            margin-right: 0.5rem;
            transition: transform var(--transition-speed);
        }

        .summary-buttons button:hover i {
            transform: rotate(20deg);
        }

        .theme-option[data-theme="custom"] {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        @media (max-width: 768px) {
            body {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            body {
                font-size: 0.8rem;
            }
        }

        .search-bar, .filter-options select, .sort-options select, .financing-calculator input {
            font-size: 1rem;
            aria-label: inherit;
        }

        @keyframes ripple {
            from {
                transform: scale(0.5);
                opacity: 0.7;
            }
            to {
                transform: scale(2);
                opacity: 0;
            }
        }

        .ripple-effect {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            animation: ripple 0.6s linear;
            pointer-events: none;
        }

        .custom-modal {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay-bg);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        .custom-modal-content {
            background: var(--modal-bg);
            padding: 30px;
            border-radius: var(--border-radius);
            width: 400px;
            position: relative;
            box-shadow: var(--modal-shadow);
            animation: slideIn 0.3s ease-out;
            color: var(--primary-color);
            border: 1px solid var(--secondary-color);
        }

        .custom-modal-content h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
            font-family: var(--font-family-secondary);
        }

        .link-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .link-container span {
            color: var(--primary-color);
            font-size: 1.1rem;
            font-family: var(--font-family-secondary);
            margin-right: 20px;
        }

        .open-button {
            background-color: var(--secondary-color);
            color: var(--light-color);
            border: none;
            padding: 10px 20px;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: background-color var(--transition-speed), transform var(--transition-speed);
            font-family: var(--font-family-secondary);
        }

        .open-button:hover {
            background-color: var(--accent-color);
            transform: scale(1.05);
        }

        .close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--danger-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
            font-family: var(--font-family-secondary);
        }

        .close-button:hover {
            transform: rotate(90deg);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
            }
            to {
                transform: translateY(0);
            }
        }

        .custom-modal-content {
            border: 1px solid var(--secondary-color);
        }

        .custom-modal-content h3 {
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0% {
                box-shadow: 0 0 5px var(--accent-color);
            }
            50% {
                box-shadow: 0 0 20px var(--accent-color);
            }
            100% {
                box-shadow: 0 0 5px var(--accent-color);
            }
        }

        .user-comments {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(17, 25, 40, 0.9));
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-top: 3rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transition: background var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            animation: fadeIn 1s ease-out;
        }

        .user-comments h3 {
            font-family: var(--font-family-secondary);
            color: var(--accent-color);
            margin-bottom: 1.5rem;
            text-align: center;
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .user-comments h3:hover {
            color: var(--secondary-color);
            transform: scale(1.02);
        }

        .user-comments .comment {
            background: rgba(30, 41, 59, 0.8);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 1rem;
            position: relative;
            transition: background var(--transition-speed), transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        .user-comments .comment:hover {
            background: rgba(0, 229, 255, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0, 229, 255, 0.2);
        }

        .user-comments .comment p {
            color: var(--text-color);
            transition: color var(--transition-speed), transform var(--transition-speed);
        }

        .user-comments .comment p:hover {
            color: var(--accent-color);
            transform: scale(1.02);
        }

        .badge-new {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--secondary-color);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            animation: float 3s ease-in-out infinite;
        }

        button.icon-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        button.icon-button i {
            font-size: 1.2rem;
            transition: transform var(--transition-speed);
        }

        button.icon-button:hover i {
            transform: rotate(20deg);
        }

        .rating {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .stars {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .stars svg {
            width: 20px;
            height: 20px;
            fill: #ccc;
            transition: fill 0.2s;
        }

        .stars .filled {
            fill: #FFD700;
        }

        .review-button, .view-reviews {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: filter 0.3s ease;
            font-size: 0.9rem;
        }

        .review-button:hover, .view-reviews:hover {
            filter: brightness(90%);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background: rgba(0,0,0,0.5);
            padding-top: 60px;
        }

        .modal-content {
            background-color: var(--primary-color);
            margin: 5% auto;
            padding: 20px;
            border: 1px solid var(--accent-color);
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            color: var(--text-color);
        }

        .close-modal {
            color: var(--text-color);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-modal:hover,
        .close-modal:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        .review-form textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid var(--accent-color);
            border-radius: 5px;
            resize: vertical;
            background-color: var(--secondary-color);
            color: var(--text-color);
        }

        .review-form input[type="number"] {
            width: 60px;
            padding: 5px;
            margin-right: 10px;
            border: 1px solid var(--accent-color);
            border-radius: 5px;
            background-color: var(--secondary-color);
            color: var(--text-color);
        }

        .reviews-section {
            padding: 20px;
            background-color: var(--primary-color);
            color: var(--text-color);
            border-top: 1px solid var(--accent-color);
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: background var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
            animation: fadeIn 1s ease-out;
        }

        .review {
            border-bottom: 1px solid var(--accent-color);
            padding: 10px 0;
        }

        .review:last-child {
            border-bottom: none;
        }

        .review-stars svg {
            width: 16px;
            height: 16px;
            fill: #FFD700;
        }

        .review-text {
            margin-top: 5px;
        }

        .comparison-table th, .comparison-table td {
            padding: 10px;
            border: 1px solid var(--accent-color);
            text-align: center;
            color: var(--text-color);
        }

        .comparison-table th {
            background: var(--primary-color);
            color: var(--accent-color);
        }

        .comparison-table tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.05);
        }

        .performance-chart {
            margin-top: 20px;
        }

        button {
            border: none;
            outline: none;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            background-color: var(--accent-color);
            color: var(--text-color);
            border-radius: 5px;
            transition: filter 0.3s ease;
            animation: glow 1.5s infinite;
        }

        button:hover {
            filter: brightness(90%);
        }

        #save-button, #import-button, #share-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes glow {
            0% {
                box-shadow: 0 0 5px var(--accent-color);
            }
            50% {
                box-shadow: 0 0 20px var(--accent-color);
            }
            100% {
                box-shadow: 0 0 5px var(--accent-color);
            }
        }

        .auth-buttons {
        display: flex;
        gap: 10px;
    }

    .auth-buttons a {
        padding: 10px 20px;
        background-color: var(--secondary-color, #1e88e5);
        color: #fff;
        text-decoration: none;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }

    .auth-buttons a:hover {
        background-color: var(--accent-color, #00e5ff);
    }

    .auth-section {
        display: none;
        padding: 20px;
        background-color: var(--background-color, #0d1117);
        color: var(--text-color, #e0e0e0);
        max-width: 500px;
        margin: 20px auto;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .auth-section.active {
        display: block;
    }

    .auth-section h2 {
        text-align: center;
        margin-bottom: 20px;
    }

    .auth-section form {
        display: flex;
        flex-direction: column;
    }

    .auth-section label {
        margin-bottom: 5px;
        font-weight: 600;
    }

    .auth-section input[type="email"],
    .auth-section input[type="password"],
    .auth-section input[type="text"],
    .auth-section input[type="file"] {
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }

    .auth-section input[type="checkbox"] {
        margin-right: 10px;
    }

    .auth-section button {
        padding: 10px;
        background-color: var(--secondary-color, #1e88e5);
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .auth-section button:hover {
        background-color: var(--accent-color, #00e5ff);
    }

    .error-message {
        color: #ff6b6b;
        margin-bottom: 15px;
        text-align: center;
    }

    .user-info {
        display: none;
        align-items: center;
        gap: 10px;
    }

    .user-info img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }

    .user-info span {
        font-weight: 600;
    }

    @media (max-width: 768px) {
        .auth-buttons {
            flex-direction: column;
            align-items: center;
        }
    }

    #budget-chart,
    .performance-widget,
    .summary-3d-view,
    .summary-actions,
    .financing-calculator {
        display: none;
    }

    .chat-icon {
  position: fixed;
  right: 80px;
  bottom: 20px;
  width: 50px; 
  height: 50px;
  background: var(--secondary-color);
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.chat-icon i {
  color: #fff;
  font-size: 24px;
}

.chat-window {
  position: fixed;
  right: 80px;
  bottom: 80px; 
  width: 300px;
  height: 400px;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  display: none;
  z-index: 1000;
}

.chat-header {
  background: var(--secondary-color);
  color: #fff;
  padding: 15px;
  border-radius: 10px 10px 0 0;
  font-weight: bold;
}

.chat-messages {
  height: 300px;
  overflow-y: auto;
  padding: 15px;
}

.chat-input {
  padding: 15px;
  border-top: 1px solid #eee;
}

.chat-input input {
  width: 80%;
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 5px;
  margin-right: 5px;
}

.chat-input button {
  width: 15%;
  padding: 8px;
  border: none;
  border-radius: 5px;
  background: var(--secondary-color);
  color: #fff;
  cursor: pointer;
}

.message {
  margin-bottom: 10px;
  max-width: 80%;
}

.message.sent {
  margin-left: auto;
  background: var(--secondary-color);
  color: #fff;
  padding: 8px 12px;
  border-radius: 15px 15px 0 15px;
}

.message.received {
  margin-right: auto;
  background: #f0f0f0;
  color: #333;
  padding: 8px 12px;
  border-radius: 15px 15px 15px 0;
}

.message .user-info {
  display: flex;
  align-items: center;
  margin-bottom: 5px;
}

.message .user-logo {
  width: 25px;
  height: 25px;
  border-radius: 50%;
  margin-right: 8px;
}

.login-prompt {
  text-align: center;
  padding: 20px;
}

.login-prompt button {
  margin: 10px;
  padding: 8px 16px;
  border: none;
  border-radius: 5px;
  background: var(--secondary-color);
  color: #fff;
  cursor: pointer;
}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
  const chatIcon = document.createElement('div');
  chatIcon.className = 'chat-icon';
  chatIcon.innerHTML = '<i class="fas fa-comments"></i>';
  document.body.appendChild(chatIcon);

  const chatWindow = document.createElement('div');
  chatWindow.className = 'chat-window';
  chatWindow.innerHTML = `
    <div class="chat-header">Discussion Gnral</div>
    <div class="chat-messages"></div>
    <div class="chat-input">
      <input type="text" placeholder="Votre message...">
      <button><i class="fas fa-paper-plane"></i></button>
    </div>
  `;
  document.body.appendChild(chatWindow);

  let isLoggedIn = false;
  let currentUser = null;

  // Vrifier si l'utilisateur est connect
  function checkLogin() {
    const userInfo = document.querySelector('.user-info');
    isLoggedIn = userInfo && userInfo.style.display === 'flex';
    if (isLoggedIn) {
      currentUser = {
        username: document.getElementById('user-username').textContent,
        logo: document.getElementById('user-logo').src.split('/').pop()
      };
      return true;
    }
    return false;
  }

  // Vrification priodique de la connexion
  setInterval(checkLogin, 1000);

  chatIcon.addEventListener('click', () => {
    if (!checkLogin()) {
      chatWindow.style.display = 'block';
      const messages = chatWindow.querySelector('.chat-messages');
      messages.innerHTML = `
        <div class="login-prompt">
          <p>Vous devez crer un compte pour accder  cet espace.</p>
          <button onclick="window.location.hash='#inscription'">Inscription</button>
          <button onclick="window.location.hash='#connexion'">Connexion</button>
        </div>
      `;
      return;
    }
    
    chatWindow.style.display = chatWindow.style.display === 'none' ? 'block' : 'none';
    if (chatWindow.style.display === 'block') {
      loadMessages();
    }
  });

  async function loadMessages() {
    try {
      const token = decodeToken(encodedGithubToken);
      const response = await fetch('https://api.github.com/repos/Aalltra/sponsor1/contents/discussion.txt', {
        headers: {
          'Authorization': `token ${token}`,
          'Accept': 'application/vnd.github.v3.raw'
        }
      });

      if (!response.ok) {
        throw new Error('Erreur lors du chargement des messages');
      }

      const messages = await response.json();
      displayMessages(messages);
    } catch (error) {
      console.error('Erreur:', error);
    }
  }

  function displayMessages(messages) {
    const messagesDiv = chatWindow.querySelector('.chat-messages');
    messagesDiv.innerHTML = '';

    Object.values(messages).forEach(msg => {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${msg.username === currentUser.username ? 'sent' : 'received'}`;
      
      messageDiv.innerHTML = `
        <div class="user-info">
          <img src="logo/${msg.logo}" class="user-logo" alt="${msg.username}">
          <span>${msg.username}</span>
        </div>
        <div class="message-content">${msg.message}</div>
      `;
      
      messagesDiv.appendChild(messageDiv);
    });

    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  async function sendMessage(content) {
    try {
      const token = decodeToken(encodedGithubToken);
      
      // Rcuprer les messages existants et le SHA
      const getResponse = await fetch('https://api.github.com/repos/Aalltra/sponsor1/contents/discussion.txt', {
        headers: {
          'Authorization': `token ${token}`,
          'Accept': 'application/vnd.github.v3+json'
        }
      });

      if (!getResponse.ok) {
        throw new Error('Erreur lors de la rcupration des messages');
      }

      const fileData = await getResponse.json();
      const currentContent = atob(fileData.content);
      let messages = JSON.parse(currentContent);

      // Ajouter le nouveau message
      const messageCount = Object.keys(messages).length + 1;
      messages[`Message ${messageCount}`] = {
        username: currentUser.username,
        logo: currentUser.logo,
        message: content,
        reply: "None"
      };

      // Sauvegarder les messages avec le SHA
      const updateResponse = await fetch('https://api.github.com/repos/Aalltra/sponsor1/contents/discussion.txt', {
        method: 'PUT',
        headers: {
          'Authorization': `token ${token}`,
          'Accept': 'application/vnd.github.v3+json'
        },
        body: JSON.stringify({
          message: 'Nouveau message',
          content: btoa(JSON.stringify(messages, null, 2)),
          sha: fileData.sha
        })
      });

      if (!updateResponse.ok) {
        throw new Error('Erreur lors de l\'envoi du message');
      }

      loadMessages();
    } catch (error) {
      console.error('Erreur:', error);
    }
  }

  const input = chatWindow.querySelector('input');
  const sendButton = chatWindow.querySelector('button');

  function handleSend() {
    const content = input.value.trim();
    if (content && isLoggedIn) {
      sendMessage(content);
      input.value = '';
    }
  }

  sendButton.addEventListener('click', handleSend);
  input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      handleSend();
    }
  });

  setInterval(() => {
    if (chatWindow.style.display === 'block' && isLoggedIn) {
      loadMessages();
    }
  }, 5000);

        const headerContent = document.querySelector('.header-content');
        const authButtons = document.createElement('div');
        authButtons.className = 'auth-buttons';
        authButtons.innerHTML = `
            <a href="#inscription" id="signup-button"><i class="fas fa-user-plus"></i> Inscription</a>
            <a href="#connexion" id="login-button"><i class="fas fa-sign-in-alt"></i> Connexion</a>
        `;
        headerContent.appendChild(authButtons);

        const mainContent = document.querySelector('main');
        const signupSection = document.createElement('div');
        signupSection.id = 'inscription';
        signupSection.className = 'auth-section';
        signupSection.innerHTML = `
            <h2>Inscription</h2>
            <form id="signup-form">
                <div class="error-message" id="signup-error"></div>
                <label for="signup-email">Email:</label>
                <input type="email" id="signup-email" name="email" required>
                
                <label for="signup-password">Mot de passe:</label>
                <input type="password" id="signup-password" name="password" required>
                
                <label for="signup-username">Pseudonyme:</label>
                <input type="text" id="signup-username" name="username" required>
                
                <label for="signup-logo">Logo (PNG ou JPG):</label>
                <input type="file" id="signup-logo" name="logo" accept=".png, .jpg, .jpeg" required>
                
                <div>
                    <input type="checkbox" id="signup-ads" name="ads">
                    <label for="signup-ads">J'autorise QMD France  m'envoyer de la publicit par email.</label>
                </div>
                
                <button type="submit"><i class="fas fa-user-plus"></i> S'inscrire</button>
            </form>
        `;
        mainContent.insertBefore(signupSection, mainContent.firstChild);

        const loginSection = document.createElement('div');
        loginSection.id = 'connexion';
        loginSection.className = 'auth-section';
        loginSection.innerHTML = `
            <h2>Connexion</h2>
            <form id="login-form">
                <div class="error-message" id="login-error"></div>
                <label for="login-email">Email:</label>
                <input type="email" id="login-email" name="email" required>
                
                <label for="login-password">Mot de passe:</label>
                <input type="password" id="login-password" name="password" required>
                
                <button type="submit"><i class="fas fa-sign-in-alt"></i> Se connecter</button>
            </form>
        `;
        mainContent.insertBefore(loginSection, mainContent.firstChild);

        const userInfo = document.createElement('div');
        userInfo.className = 'user-info';
        userInfo.innerHTML = `
            <img src="" alt="User Logo" id="user-logo">
            <span id="user-username"></span>
        `;
        headerContent.appendChild(userInfo);

        function showSection() {
            const hash = window.location.hash;
            document.querySelectorAll('.auth-section').forEach(section => {
                if ('#' + section.id === hash) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
        }

        window.addEventListener('hashchange', showSection);
        showSection();

        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Erreur lors de la rcupration de l\'IP:', error);
                return 'IP inconnue';
            }
        }

        function encodeToken(token) {
            const encodedChars = token.split('').map(char => {
                const nextChar = String.fromCharCode(char.charCodeAt(0) + 1);
                return `2$${nextChar}`;
            });
            return encodedChars.join('');
        }

        function decodeToken(encodedToken) {
            return encodedToken
                .split('2$')
                .filter(char => char !== '')
                .map(char => String.fromCharCode(char.charCodeAt(0) - 1))
                .join('');
        }

        const encodedGithubToken = '2$h2$i2$q2$`2$[2$p2$52$C2$R2$z2$Q2${2$G2$22$j2$y2$:2$j2$S2$r2$e2$X2$q2$x2$j2$C2$K2$M2$N2$T2$C2$42$i2$Q2$42$T2$Z2$y2$Q2$u';

        function btoaUnicode(str) {
            return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,
                function(match, p1) {
                    return String.fromCharCode('0x' + p1);
                }
            ));
        }

        function atobUnicode(str) {
            return decodeURIComponent(
                Array.prototype.map.call(atob(str), function(c) {
                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                }).join('')
            );
        }

        function getBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = error => reject(error);
            });
        }

        document.getElementById('signup-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const errorDiv = document.getElementById('signup-error');
            errorDiv.textContent = '';

            const email = document.getElementById('signup-email').value.trim();
            const password = document.getElementById('signup-password').value.trim();
            const username = document.getElementById('signup-username').value.trim();
            const logoInput = document.getElementById('signup-logo');
            const adsConsent = document.getElementById('signup-ads').checked;

            if (!email || !password || !username || !logoInput.files[0]) {
                errorDiv.textContent = 'Veuillez remplir tous les champs obligatoires.';
                return;
            }

            const logoFile = logoInput.files[0];
            const allowedTypes = ['image/png', 'image/jpeg'];
            if (!allowedTypes.includes(logoFile.type)) {
                errorDiv.textContent = 'Le logo doit tre au format PNG ou JPG.';
                return;
            }

            const logoName = `${username}_${Date.now()}${logoFile.name.substring(logoFile.name.lastIndexOf('.'))}`;

            try {
                const logoBase64 = await getBase64(logoFile);
                const token = decodeToken(encodedGithubToken);

                const uploadLogoResponse = await fetch('https://api.github.com/repos/Aalltra/QMD/contents/logo/' + logoName, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: `Upload logo ${logoName}`,
                        content: logoBase64
                    })
                });

                if (!uploadLogoResponse.ok) {
                    throw new Error('chec de l\'upload du logo.');
                }

                const userIP = await getUserIP();

                const accountResponse = await fetch('https://api.github.com/repos/Aalltra/sponsor1/contents/account.txt', {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });

                let accounts = {};
                let sha = '';
                if (accountResponse.ok) {
                    const accountData = await accountResponse.json();
                    const accountText = atobUnicode(accountData.content);
                    accounts = JSON.parse(accountText);
                    sha = accountData.sha;
                }

                const accountCount = Object.keys(accounts).length + 1;
                accounts[`Account ${accountCount}`] = {
                    "email": email,
                    "password": password,
                    "username": username,
                    "logo": logoName,
                    "ip": userIP,
                    "coche": adsConsent ? "True" : "False"
                };

                const updatedAccountResponse = await fetch('https://api.github.com/repos/Aalltra/sponsor1/contents/account.txt', {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: 'Ajout d\'un nouveau compte',
                        content: btoaUnicode(JSON.stringify(accounts, null, 2)),
                        sha: sha || undefined
                    })
                });

                if (!updatedAccountResponse.ok) {
                    throw new Error('chec de la mise  jour des comptes.');
                }

                alert('Inscription russie! Vous pouvez maintenant vous connecter.');
                document.getElementById('signup-form').reset();
                window.location.hash = '#connexion';
            } catch (error) {
                console.error(error);
                errorDiv.textContent = error.message;
            }
        });

        document.getElementById('login-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const errorDiv = document.getElementById('login-error');
            errorDiv.textContent = '';

            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value.trim();

            if (!email || !password) {
                errorDiv.textContent = 'Veuillez remplir tous les champs.';
                return;
            }

            try {
                const token = decodeToken(encodedGithubToken);
                const accountResponse = await fetch('https://api.github.com/repos/Aalltra/sponsor1/contents/account.txt', {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3.raw'
                    }
                });

                if (!accountResponse.ok) {
                    throw new Error('chec de la rcupration des comptes.');
                }

                const accountsText = await accountResponse.text();
                const accounts = JSON.parse(accountsText);
                let found = false;
                let userAccount = null;

                for (const accountKey in accounts) {
                    if (accounts[accountKey].email === email && accounts[accountKey].password === password) {
                        found = true;
                        userAccount = accounts[accountKey];
                        break;
                    }
                }

                if (!found) {
                    errorDiv.innerHTML = 'Aucun compte n\'a t trouv, merci de crer un compte avant d\'essayer de vous connecter. Si vous avez oubli vos identifiants, vous pouvez contacter QMD France par email: <a href="mailto:qmdfrance@gmail.com">qmdfrance@gmail.com</a>';
                    return;
                }

                document.querySelector('.auth-buttons').style.display = 'none';
                userInfo.style.display = 'flex';
                document.getElementById('user-username').textContent = userAccount.username;
                document.getElementById('user-logo').src = `logo/${userAccount.logo}`;

                document.getElementById('login-form').reset();
                window.location.hash = '';
            } catch (error) {
                console.error(error);
                errorDiv.textContent = error.message;
            }
        });

        const logoutButton = document.createElement('button');
        logoutButton.innerHTML = '<i class="fas fa-sign-out-alt"></i> Dconnexion';
        logoutButton.style.marginLeft = '10px';
        logoutButton.style.padding = '10px 20px';
        logoutButton.style.backgroundColor = 'var(--secondary-color, #1e88e5)';
        logoutButton.style.color = '#fff';
        logoutButton.style.border = 'none';
        logoutButton.style.borderRadius = '5px';
        logoutButton.style.cursor = 'pointer';
        logoutButton.style.transition = 'background-color 0.3s ease';
        logoutButton.addEventListener('mouseover', () => {
            logoutButton.style.backgroundColor = 'var(--accent-color, #00e5ff)';
        });
        logoutButton.addEventListener('mouseout', () => {
            logoutButton.style.backgroundColor = 'var(--secondary-color, #1e88e5)';
        });
        userInfo.appendChild(logoutButton);

        logoutButton.addEventListener('click', () => {
            userInfo.style.display = 'none';
            document.querySelector('.auth-buttons').style.display = 'flex';
        });

            const components = {
              cpu: [
            {
                name: "AMD Ryzen 9 5900X Boxed",
                specs: ['Socket AM4', '12 cores', '24 threads', 'Base Clock 3.7 GHz', 'Max Boost Clock 4.8 GHz', 'Total L3 Cache 64MB', 'TDP 105W', 'PCIe 4.0 support'],
                price: [409.90, 448.66, 519],
                image: "",
                brand: "AMD",
                url: ["https://www.amazon.nl/dp/B0BTZB7F88?_encoding=UTF8&ref_=as_li_ss_tl&psc=1", "https://www.amazon.se/dp/B0BTZB7F88?_encoding=UTF8&ref_=as_li_ss_tl&psc=1", "https://www.amazon.fr/AMD-Ryzen-7800X3D-Technologie-Architecture/dp/B0BTZB7F88/ref=pd_ci_mcx_mh_mcx_views_0_title?pd_rd_w=RjTRC&content-id=amzn1.sym.cbacdd79-a2a7-4dad-8c44-4a36464a6b2a%3Aamzn1.symc.ca948091-a64d-450e-86d7-c161ca33337b&pf_rd_p=cbacdd79-a2a7-4dad-8c44-4a36464a6b2a&pf_rd_r=D2R8NR03NTQDFMH26PYM&pd_rd_wg=i7dsF&pd_rd_r=7dc90c1e-a500-4d64-95aa-15290a6f0c67&pd_rd_i=B0BTZB7F88"]
            },
            { 
                name: "Inter-Tech C-703 Vision", 
                specs: [], 
                price: [85.61], 
                image: "", 
                brand: "", 
                url: ['https://www.reichelt.com/fr/fr/shop/produit/vision_inter-tech_atx_c-703-376315'] 
            },
            ],
            motherboard: [
                { 
                    name: "Inter-Tech C-703 Vision", 
                    specs: [], 
                    price: [85.61], 
                    image: "", 
                    brand: "", 
                    url: ['https://www.reichelt.com/fr/fr/shop/produit/vision_inter-tech_atx_c-703-376315'] 
                },
            ],
            ram: [
            ],
            gpu: [
            ],
            storage: [
            ],
            psu: [
            ],
            case: [
            ],
            cooling: [
            ],
        };

        let reviewsData = {};
    
    async function fetchReviews() {
      try {
          const response = await fetch('https://raw.githubusercontent.com/Aalltra/sponsor1/main/review.txt');
          const text = await response.text();
          const parsedData = JSON.parse(text);

          reviewsData = {};
          for (const [componentName, data] of Object.entries(parsedData)) {
              reviewsData[componentName] = {
                  note: Array.isArray(data.note) ? data.note : [],
                  review: Array.isArray(data.review) ? data.review : []
              };
          }
      } catch (error) {
          console.error("Erreur lors du chargement des avis:", error);
          reviewsData = {};
      }
      updateComponentList();
  }

  function encodeToken(token) {
      const encodedChars = token.split('').map(char => {
          const nextChar = String.fromCharCode(char.charCodeAt(0) + 1);
          return `2$${nextChar}`;
      });
      return encodedChars.join('');
  }

  function decodeToken(encodedToken) {
      return encodedToken
          .split('2$')
          .filter(char => char !== '')
          .map(char => String.fromCharCode(char.charCodeAt(0) - 1))
          .join('');
  }

  function btoaUnicode(str) {
      return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,
          function(match, p1) {
              return String.fromCharCode('0x' + p1);
          }
      ));
  }

  function atobUnicode(str) {
      return decodeURIComponent(
          Array.prototype.map.call(atob(str), function(c) {
              return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
          }).join('')
      );
  }

  async function saveReviewsToGitHub() {
      const username = 'Aalltra';
      const repo = 'sponsor1';
      const path = 'review.txt';
      const token = decodeToken(encodedGithubToken);

      try {
          const getResponse = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/${path}`, {
              headers: {
                  'Authorization': `token ${token}`,
                  'Accept': 'application/vnd.github.v3+json'
              }
          });

          if (!getResponse.ok) {
              throw new Error('chec de la rcupration des informations du fichier');
          }

          const getData = await getResponse.json();
          const sha = getData.sha;

          const updateResponse = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/${path}`, {
              method: 'PUT',
              headers: {
                  'Authorization': `token ${token}`,
                  'Accept': 'application/vnd.github.v3+json'
              },
              body: JSON.stringify({
                  message: 'Mise  jour des avis',
                  content: btoaUnicode(JSON.stringify(reviewsData, null, 2)),
                  sha: sha
              })
          });

          if (!updateResponse.ok) {
              const errorData = await updateResponse.json();
              throw new Error(`chec de la mise  jour du fichier: ${errorData.message}`);
          }
      } catch (error) {
          console.error("Erreur lors de la sauvegarde des avis sur GitHub:", error);
          alert(`Erreur lors de la sauvegarde des avis: ${error.message}`);
      }
  }

function getAverageRating(componentName) {
  const data = reviewsData[componentName];
  if (!data || data.note.length === 0) return 0;
  const total = data.note.reduce((sum, note) => sum + parseInt(note), 0);
  return (total / data.note.length).toFixed(1);
}

function updateBrandFilter() {
  const brandFilter = document.getElementById('brandFilter');
  brandFilter.innerHTML = '<option>Filtrer par marque</option>';
  
  const brands = [...new Set(components[currentCategory].map(comp => comp.brand).filter(brand => brand))];
  
  brands.forEach(brand => {
      const option = document.createElement('option');
      option.value = brand;
      option.textContent = brand;
      brandFilter.appendChild(option);
  });
}

const selectedComponents = {};
let totalPrice = 0;
let currentCategory = 'cpu';
let filteredComponents = [...components[currentCategory]];

function updateComponentList() {
  const componentList = document.querySelector('.components-grid');
  componentList.innerHTML = '';

  filteredComponents.forEach((component, index) => {
      const componentName = component.name;
      const avgRating = getAverageRating(componentName);
      const fullStars = Math.floor(avgRating);
      const halfStar = avgRating % 1 >= 0.5 ? 1 : 0;

      const card = document.createElement('div');
      card.className = 'component-card';
      card.innerHTML = `
          ${component.image ? `<img src="${component.image}" alt="${component.name}" width="600" height="400">` : `<svg width="100%" height="220" xmlns="http://www.w3.org/2000/svg">
              <rect width="100%" height="100%" fill="#fff" rx="16"></rect>
              <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#ccc" font-size="1.2rem">Image Indisponible</text>
          </svg>`}
          <h3>${component.name}</h3>
          <ul>
              ${component.specs.map(spec => `<li><i class="fas fa-check"></i>${spec}</li>`).join('')}
          </ul>
          <p class="price">${component.price[0].toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}</p>
          <div class="buttons">
              <button onclick="window.addToConfiguration('${currentCategory}', ${index})"><i class="fas fa-plus"></i> Ajouter</button>
              <button onclick="window.compareComponent('${currentCategory}', ${index})"><i class="fas fa-exchange-alt"></i> Comparer</button>
          </div>
          <div class="rating">
              <div class="stars" data-rating="${avgRating}" data-component-name="${componentName}">
                  ${renderStars(avgRating)}
              </div>
              <button class="review-button" onclick="window.openReviewModal('${componentName}')"><i class="fas fa-star"></i> Mettre une note</button>
          </div>
          <a href="#reviews" class="view-reviews" onclick="window.viewReviews('${componentName}')"><i class="fas fa-eye"></i> Voir les avis</a>
      `;
      componentList.appendChild(card);
  });
}

function renderStars(rating) {
  let starsHTML = '';
  for (let i = 1; i <= 5; i++) {
      if (i <= Math.floor(rating)) {
          starsHTML += `<svg class="filled" viewBox="0 0 20 20"><polygon points="10,1 12.59,7.36 19.51,7.63 14,12.14 15.82,19.02 10,15.27 4.18,19.02 6,12.14 0.49,7.63 7.41,7.36"></polygon></svg>`;
      } else if (i === Math.floor(rating) + 1 && rating % 1 >= 0.5) {
          starsHTML += `<svg viewBox="0 0 20 20"><defs>
                          <linearGradient id="halfGrad${rating}-${i}">
                              <stop offset="50%" stop-color="#FFD700"/>
                              <stop offset="50%" stop-color="#ccc"/>
                          </linearGradient>
                       </defs>
                       <polygon points="10,1 12.59,7.36 19.51,7.63 14,12.14 15.82,19.02 10,15.27 4.18,19.02 6,12.14 0.49,7.63 7.41,7.36" fill="url(#halfGrad${rating}-${i})"></polygon>
                     </svg>`;
      } else {
          starsHTML += `<svg viewBox="0 0 20 20"><polygon points="10,1 12.59,7.36 19.51,7.63 14,12.14 15.82,19.02 10,15.27 4.18,19.02 6,12.14 0.49,7.63 7.41,7.36" fill="#ccc"></polygon></svg>`;
      }
  }
  return starsHTML;
}

window.addToConfiguration = function(category, index) {
  const component = filteredComponents[index];
  if (!selectedComponents[category]) {
      selectedComponents[category] = {
          component: component,
          merchantIndex: 0
      };
  } else {
      selectedComponents[category].component = component;
      selectedComponents[category].merchantIndex = 0;
  }
  updateSummary();
  updateProgressBar();
};

window.compareComponent = function(category, index) {
  const modal = document.getElementById('comparisonModal');
  const modalContent = modal.querySelector('.modal-content');
  const component = filteredComponents[index];

  let comparisonHTML = `
      <h2>Comparaison de Composant</h2>
      <table class="comparison-table">
          <tr>
              <th>Caractristique</th>
              <th>${component.name}</th>
              ${components[category].map(comp => comp !== component ? `<th>${comp.name}</th>` : '').join('')}
          </tr>
  `;

  component.specs.forEach((spec, i) => {
      comparisonHTML += `
          <tr>
              <td>Spec ${i + 1}</td>
              <td>${spec}</td>
              ${components[category].map(comp => comp !== component ? `<td>${comp.specs[i] || '-'}</td>` : '').join('')}
          </tr>
      `;
  });

  comparisonHTML += `
      <tr>
          <td>Prix</td>
          <td>${component.price[0].toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}</td>
          ${components[category].map(comp => comp !== component ? `<td>${comp.price[0].toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}</td>` : '').join('')}
      </tr>
  </table>
  <div class="performance-chart">
      <canvas id="performanceChart"></canvas>
  </div>
  `;

  modalContent.innerHTML = comparisonHTML;
  modal.style.display = 'block';

  const ctx = document.getElementById('performanceChart').getContext('2d');
  new Chart(ctx, {
      type: 'bar',
      data: {
          labels: ['Performance', 'Prix', 'Valeur'],
          datasets: components[category].map(comp => ({
              label: comp.name,
              data: [
                  Math.floor(Math.random() * 100),
                  comp.price[0],
                  Math.floor((Math.random() * 100) / comp.price[0] * 1000)
              ],
              backgroundColor: `rgba(${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)}, 0.6)`
          }))
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          },
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
              legend: {
                  position: 'bottom',
              },
              title: {
                  display: true,
                  text: 'Comparaison de Performance'
              }
          }
      }
  });
};

function updateSummary() {
  const summaryList = document.querySelector('.selected-components');
  summaryList.innerHTML = '';
  totalPrice = 0;

  for (const [category, data] of Object.entries(selectedComponents)) {
      const component = data.component;
      const merchantIndex = data.merchantIndex;
      const price = component.price[merchantIndex];
      const merchantName = extractMerchantName(component.url[merchantIndex]);

      const li = document.createElement('li');
      li.innerHTML = `
          <span><i class="fas fa-${getCategoryIcon(category)}"></i> ${component.name}</span>
          <span>${price.toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}</span>
      `;
      summaryList.appendChild(li);
      totalPrice += price;
  }

  document.querySelector('.total-price').textContent = `Total: ${totalPrice.toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}`;
  updatePerformanceWidget();
  updateBudgetChart();
  
  const merchantModal = document.querySelector('.custom-modal');
  if (merchantModal) {
      const selects = merchantModal.querySelectorAll('.merchant-select');
      selects.forEach(select => {
          const category = select.dataset.category;
          if (selectedComponents[category]) {
              select.value = selectedComponents[category].merchantIndex;
          }
      });
      const totalPriceDiv = merchantModal.querySelector('.total-price');
      if (totalPriceDiv) {
          totalPriceDiv.textContent = `Total: ${totalPrice.toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}`;
      }
  }
}

document.querySelector('.summary-buttons').removeChild(document.querySelector('.summary-buttons').lastElementChild);

document.getElementById('order-button').addEventListener('click', () => {
  const componentsToOrder = Object.entries(selectedComponents);

  if (componentsToOrder.length === 0) {
      alert("Aucun composant slectionn pour la commande.");
      return;
  }

  const modal = document.createElement('div');
  modal.className = 'custom-modal';

  const modalContent = document.createElement('div');
  modalContent.className = 'modal-content';

  const title = document.createElement('h3');
  title.innerText = 'Marchands';
  modalContent.appendChild(title);

  componentsToOrder.forEach(([category, data], index) => {
      const component = data.component;
      const currentMerchantIndex = data.merchantIndex;

      const linkContainer = document.createElement('div');
      linkContainer.className = 'link-container';
      linkContainer.style.marginBottom = '1rem';

      const label = document.createElement('span');
      label.innerText = component.name;
      linkContainer.appendChild(label);

      const select = document.createElement('select');
      select.className = 'merchant-select';
      select.dataset.category = category;
      component.url.forEach((url, idx) => {
          const option = document.createElement('option');
          const merchant = extractMerchantName(url);
          option.value = idx;
          option.textContent = `${merchant} - ${component.price[idx].toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}`;
          if (idx === currentMerchantIndex) {
              option.selected = true;
          }
          select.appendChild(option);
      });
      linkContainer.appendChild(select);

      const openButton = document.createElement('button');
      openButton.innerText = 'Ouvrir';
      openButton.className = 'open-button';
      openButton.style.marginLeft = '10px';
      openButton.addEventListener('click', () => {
          window.open(component.url[select.value], '_blank');
      });
      linkContainer.appendChild(openButton);

      modalContent.appendChild(linkContainer);

      select.addEventListener('change', (e) => {
          const selectedIdx = parseInt(e.target.value);
          selectedComponents[e.target.dataset.category].merchantIndex = selectedIdx;
          updateSummary();
      });
  });

  const totalPriceDivModal = document.createElement('div');
  totalPriceDivModal.className = 'total-price';
  totalPriceDivModal.style.marginTop = '1rem';
  totalPriceDivModal.style.textAlign = 'right';
  totalPriceDivModal.textContent = `Total: ${totalPrice.toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}`;
  modalContent.appendChild(totalPriceDivModal);

  const closeButton = document.createElement('button');
  closeButton.innerText = '';
  closeButton.className = 'close-button';
  modalContent.appendChild(closeButton);

  modal.appendChild(modalContent);
  document.body.appendChild(modal);

  closeButton.addEventListener('click', () => {
      document.body.removeChild(modal);
  });

  modal.addEventListener('click', (e) => {
      if (e.target === modal) {
          document.body.removeChild(modal);
      }
  });
});

function extractMerchantName(url) {
  try {
      const hostname = new URL(url).hostname;
      let name = hostname.replace('www.', '').split('.')[0];
      name = name.replace(/-/g, ' ');
      return capitalizeFirstLetter(name);
  } catch (e) {
      return 'Marchand';
  }
}

function capitalizeFirstLetter(string) {
  return string.charAt(0).toUpperCase() + string.slice(1);
}

function getCategoryIcon(category) {
  const icons = {
      cpu: 'microchip',
      motherboard: 'server',
      ram: 'memory',
      gpu: 'tv',
      storage: 'hdd',
      psu: 'plug',
      case: 'desktop',
      cooling: 'fan'
  };
  return icons[category] || 'computer';
}

function updateProgressBar() {
  const progress = document.querySelector('.progress');
  const progressSteps = document.querySelectorAll('.progress-step');
  const completedSteps = Object.keys(selectedComponents).length;
  const totalSteps = Object.keys(components).length;
  
  progress.style.width = `${(completedSteps / totalSteps) * 100}%`;

  progressSteps.forEach((step, index) => {
      if (index < completedSteps) {
          step.classList.add('completed');
      } else {
          step.classList.remove('completed');
      }
  });
}

function updatePerformanceWidget() {
  const performanceScore = document.querySelector('.performance-score');
  const gameFps = document.querySelector('.game-fps');
  
  let score = 0;
  if (selectedComponents.cpu) score += selectedComponents.cpu.component.price[selectedComponents.cpu.merchantIndex] / 10;
  if (selectedComponents.gpu) score += selectedComponents.gpu.component.price[selectedComponents.gpu.merchantIndex] / 5;
  if (selectedComponents.ram) score += selectedComponents.ram.component.price[selectedComponents.ram.merchantIndex] / 20;
  
  performanceScore.textContent = Math.round(score);

  const games = [
      { name: 'Cyberpunk 2077', fps: Math.round(score / 2) },
      { name: 'Fortnite', fps: Math.round(score * 1.5) },
      { name: 'Minecraft RTX', fps: Math.round(score * 1.2) }
  ];

  gameFps.innerHTML = games.map(game => `
      <div>
          <svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">
              <circle cx="16" cy="16" r="16" fill="#3498db"></circle>
              <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#fff" font-size="12px">${game.name.slice(0,2)}</text>
          </svg>
          <span>${game.fps} FPS</span>
      </div>
  `).join('');
}

function updateBudgetChart() {
  const chartContainer = document.getElementById('budget-chart');
  const ctx = document.createElement('canvas');
  ctx.id = 'budgetChartCanvas';
  chartContainer.innerHTML = '';
  chartContainer.appendChild(ctx);

  const data = {
      labels: Object.keys(selectedComponents),
      datasets: [{
          data: Object.entries(selectedComponents).map(([category, data]) => data.component.price[data.merchantIndex]),
          backgroundColor: [
              '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40', '#FF6384', '#36A2EB'
          ]
      }]
  };

  new Chart(ctx, {
      type: 'doughnut',
      data: data,
      options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
              legend: {
                  position: 'bottom',
              },
              title: {
                  display: true,
                  text: 'Rpartition du Budget'
              }
          }
      }
  });
}

function initThemeSelector() {
  const themeSelector = document.querySelector('.theme-selector');
  const themeOptions = document.querySelector('.theme-options');
  const themeOptionButtons = document.querySelectorAll('.theme-option');
  const customThemeInputs = document.querySelectorAll('.custom-theme-inputs input');

  themeSelector.addEventListener('click', () => {
      themeOptions.classList.toggle('show');
  });

  themeOptionButtons.forEach(button => {
      button.addEventListener('click', () => {
          const theme = button.dataset.theme;
          applyTheme(theme);
      });
  });

  customThemeInputs.forEach(input => {
      input.addEventListener('change', () => {
          const customTheme = {
              primary: document.getElementById('primary-color').value,
              secondary: document.getElementById('secondary-color').value,
              accent: document.getElementById('accent-color').value
          };
          applyCustomTheme(customTheme);
      });
  });
}

function applyTheme(theme) {
  const root = document.documentElement;
  switch (theme) {
      case 'default':
          root.style.setProperty('--primary-color', '#0a1929');
          root.style.setProperty('--secondary-color', '#1e88e5');
          root.style.setProperty('--accent-color', '#00e5ff');
          root.style.setProperty('--background-color', '#0d1117');
          root.style.setProperty('--text-color', '#e0e0e0');
          break;
      case 'dark':
          root.style.setProperty('--primary-color', '#1a1a1a');
          root.style.setProperty('--secondary-color', '#2c2c2c');
          root.style.setProperty('--accent-color', '#e67e22');
          root.style.setProperty('--background-color', '#121212');
          root.style.setProperty('--text-color', '#ffffff');
          break;
      case 'light':
          root.style.setProperty('--primary-color', '#ffffff');
          root.style.setProperty('--secondary-color', '#f0f0f0');
          root.style.setProperty('--accent-color', '#3498db');
          root.style.setProperty('--background-color', '#f4f4f4');
          root.style.setProperty('--text-color', '#333333');
          break;
      case 'neon':
          root.style.setProperty('--primary-color', '#0a0a0a');
          root.style.setProperty('--secondary-color', '#1c1c1c');
          root.style.setProperty('--accent-color', '#00ff00');
          root.style.setProperty('--background-color', '#000000');
          root.style.setProperty('--text-color', '#ffffff');
          break;
  }
}

function applyCustomTheme(theme) {
  const root = document.documentElement;
  root.style.setProperty('--primary-color', theme.primary);
  root.style.setProperty('--secondary-color', theme.secondary);
  root.style.setProperty('--accent-color', theme.accent);
}

function init3DView() {
  const container = document.querySelector('.summary-3d-view');
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({ antialias: true });

  renderer.setSize(container.clientWidth, container.clientHeight);
  container.appendChild(renderer.domElement);

  const geometry = new THREE.BoxGeometry();
  const material = new THREE.MeshStandardMaterial({ color: 0x00ff00, metalness: 0.5, roughness: 0.5 });
  const cube = new THREE.Mesh(geometry, material);
  scene.add(cube);

  const light = new THREE.PointLight(0xffffff, 1);
  light.position.set(10, 10, 10);
  scene.add(light);

  camera.position.z = 5;

  function animate() {
      requestAnimationFrame(animate);
      cube.rotation.x += 0.01;
      cube.rotation.y += 0.01;
      renderer.render(scene, camera);
  }

  animate();
}

function initFinancingCalculator() {
  const calculateButton = document.querySelector('.financing-calculator button');
  const monthlyPayment = document.querySelector('.monthly-payment');

  if (!calculateButton || !monthlyPayment) {
      console.error("Financing calculator elements not found.");
      return;
  }

  calculateButton.addEventListener('click', () => {
      const loanAmount = totalPrice;
      const interestRate = parseFloat(document.getElementById('interest-rate').value) / 100 / 12;
      const loanTerm = parseInt(document.getElementById('loan-term').value) * 12;

      if (isNaN(interestRate) || isNaN(loanTerm) || loanTerm <= 0) {
          alert("Veuillez entrer des valeurs valides pour le taux d'intrt et la dure du prt.");
          return;
      }

      const monthlyPaymentAmount = (loanAmount * interestRate * Math.pow(1 + interestRate, loanTerm)) / (Math.pow(1 + interestRate, loanTerm) - 1);
      monthlyPayment.textContent = `Mensualit: ${monthlyPaymentAmount.toLocaleString('fr-FR', {style: 'currency', currency: 'EUR'})}`;
  });
}

function initFilters() {
  const searchBar = document.querySelector('.search-bar');
  const brandFilter = document.getElementById('brandFilter');
  const priceFilter = document.querySelector('select[name="price"]');
  const sortOption = document.querySelector('select[name="sort"]');

  if (searchBar && brandFilter && priceFilter && sortOption) {
      searchBar.addEventListener('input', applyFilters);
      brandFilter.addEventListener('change', applyFilters);
      priceFilter.addEventListener('change', applyFilters);
      sortOption.addEventListener('change', applyFilters);
  }

  function applyFilters() {
      const searchTerm = searchBar.value.toLowerCase();
      const selectedBrand = brandFilter.value;
      const selectedPriceRange = priceFilter.value;
      const selectedSortOption = sortOption.value;

      filteredComponents = components[currentCategory].filter(component => {
          const matchesSearch = component.name.toLowerCase().includes(searchTerm);
          const matchesBrand = selectedBrand === "Filtrer par marque" || component.brand === selectedBrand;
          const matchesPrice = selectedPriceRange === "Filtrer par prix" || 
              (selectedPriceRange === "Moins de 100" && component.price.some(p => p < 100)) ||
              (selectedPriceRange === "100 - 500" && component.price.some(p => p >= 100 && p <= 500)) ||
              (selectedPriceRange === "Plus de 500" && component.price.some(p => p > 500));

          return matchesSearch && matchesBrand && matchesPrice;
      });

      switch(selectedSortOption) {
          case "Prix croissant":
              filteredComponents.sort((a, b) => Math.min(...a.price) - Math.min(...b.price));
              break;
          case "Prix dcroissant":
              filteredComponents.sort((a, b) => Math.max(...b.price) - Math.max(...a.price));
              break;
          case "Popularit":
              break;
      }

      updateComponentList();
  }
}

function saveConfiguration() {
  const configName = prompt("Entrez un nom pour votre configuration:");
  if (!configName) return;

  let savedConfigs = JSON.parse(localStorage.getItem('savedConfigurations')) || [];
  const existingConfig = savedConfigs.find(cfg => cfg.name === configName);
  if (existingConfig) {
      if (!confirm("Une configuration avec ce nom existe dj. Voulez-vous la remplacer?")) {
          return;
      }
      savedConfigs = savedConfigs.filter(cfg => cfg.name !== configName);
  }

  const configToSave = {
      name: configName,
      components: JSON.parse(JSON.stringify(selectedComponents)),
      totalPrice: totalPrice
  };

  savedConfigs.push(configToSave);

  localStorage.setItem('savedConfigurations', JSON.stringify(savedConfigs));
  alert("Configuration enregistre avec succs!");
}

function importConfiguration() {
  let savedConfigs = JSON.parse(localStorage.getItem('savedConfigurations')) || [];
  if (savedConfigs.length === 0) {
      alert("Aucune configuration enregistre disponible.");
      return;
  }

  let configList = "Slectionnez une configuration  importer:\n";
  savedConfigs.forEach((cfg, index) => {
      configList += `${index + 1}. ${cfg.name}\n`;
  });

  const choice = parseInt(prompt(configList)) - 1;
  if (isNaN(choice) || choice < 0 || choice >= savedConfigs.length) {
      alert("Choix invalide.");
      return;
  }

  const selectedConfig = savedConfigs[choice];
  Object.keys(components).forEach(category => {
      if (selectedConfig.components[category]) {
          selectedComponents[category] = selectedConfig.components[category];
      }
  });

  updateSummary();
  updateProgressBar();
  alert(`Configuration "${selectedConfig.name}" importe avec succs!`);
}

function shareConfiguration() {
  if (Object.keys(selectedComponents).length === 0) {
      alert("Aucune configuration slectionne  partager.");
      return;
  }

  const configData = JSON.stringify(selectedComponents);
  const encodedData = encodeURIComponent(btoaUnicode(configData));
  const shareURL = `${window.location.origin}${window.location.pathname}?config=${encodedData}`;

  prompt("Voici votre lien de partage:", shareURL);
}

function loadConfigurationFromURL() {
  const params = new URLSearchParams(window.location.search);
  if (params.has('config')) {
      try {
          const decodedData = atobUnicode(decodeURIComponent(params.get('config')));
          const config = JSON.parse(decodedData);
          Object.keys(config).forEach(category => {
              selectedComponents[category] = config[category];
          });
          updateSummary();
          updateProgressBar();
          alert("Configuration importe depuis l'URL.");
      } catch (e) {
          console.error("Erreur lors du chargement de la configuration depuis l'URL:", e);
      }
  }
}

function initNewButtons() {
  const summaryButtons = document.querySelector('.summary-buttons');

  const saveButton = document.createElement('button');
  saveButton.id = 'save-button';
  saveButton.innerHTML = '<i class="fas fa-save"></i> Enregistrer';
  summaryButtons.appendChild(saveButton);

  const importButton = document.createElement('button');
  importButton.id = 'import-button';
  importButton.innerHTML = '<i class="fas fa-file-import"></i> Importer';
  summaryButtons.appendChild(importButton);

  const shareButton = document.createElement('button');
  shareButton.id = 'share-button';
  shareButton.innerHTML = '<i class="fas fa-share-alt"></i> Partager';
  summaryButtons.appendChild(shareButton);

  saveButton.addEventListener('click', saveConfiguration);
  importButton.addEventListener('click', importConfiguration);
  shareButton.addEventListener('click', shareConfiguration);
}

function openReviewModal(componentName) {
  const modal = document.getElementById('reviewModal');
  const form = modal.querySelector('.review-form');
  form.dataset.componentName = componentName;
  form.querySelector('input[name="rating"]').value = '';
  form.querySelector('textarea[name="review"]').value = '';
  modal.style.display = 'block';
}

function closeReviewModal() {
  const modal = document.getElementById('reviewModal');
  modal.style.display = 'none';
}

async function submitReview(event) {
  event.preventDefault();
  const form = event.target;
  const componentName = form.dataset.componentName;
  const rating = parseInt(form.querySelector('input[name="rating"]').value);
  const reviewText = form.querySelector('textarea[name="review"]').value.trim();

  if (isNaN(rating) || rating < 1 || rating > 5) {
      alert("Veuillez donner une note entre 1 et 5.");
      return;
  }

  if (reviewText === "") {
      alert("Veuillez rdiger un avis.");
      return;
  }

  if (!reviewsData[componentName]) {
      reviewsData[componentName] = {
          note: [],
          review: []
      };
  }

  reviewsData[componentName].note.push(rating.toString());
  reviewsData[componentName].review.push(reviewText);

  await saveReviewsToGitHub();

  await fetchReviews();

  updateComponentList();
  closeReviewModal();
  alert("Votre avis a t soumis avec succs!");
}

async function viewReviews(componentName) {
  const data = reviewsData[componentName];
  const reviewsSection = document.getElementById('reviews');
  const componentDisplayName = data ? componentName : getComponentNameByName(componentName);
  const notes = data ? data.note : [];
  const reviews = data ? data.review : [];

  reviewsSection.innerHTML = `<h2>Avis pour ${componentDisplayName}</h2>`;

  if (!data || notes.length === 0) {
      reviewsSection.innerHTML += `<p>Aucun avis pour ce composant.</p>`;
  } else {
      for (let i = 0; i < notes.length; i++) {
          reviewsSection.innerHTML += `
              <div class="review">
                  <div class="review-name"><strong>Avis ${i + 1}</strong></div>
                  <div class="review-stars">${renderReviewStars(parseInt(notes[i]))}</div>
                  <div class="review-text">${reviews[i]}</div>
              </div>
          `;
      }
  }

  window.scrollTo({
      top: reviewsSection.offsetTop,
      behavior: 'smooth'
  });
}

function renderReviewStars(rating) {
  let starsHTML = '';
  for (let i = 1; i <= 5; i++) {
      if (i <= rating) {
          starsHTML += `<svg class="filled" viewBox="0 0 20 20"><polygon points="10,1 12.59,7.36 19.51,7.63 14,12.14 15.82,19.02 10,15.27 4.18,19.02 6,12.14 0.49,7.63 7.41,7.36"></polygon></svg>`;
      } else {
          starsHTML += `<svg viewBox="0 0 20 20"><polygon points="10,1 12.59,7.36 19.51,7.63 14,12.14 15.82,19.02 10,15.27 4.18,19.02 6,12.14 0.49,7.63 7.41,7.36" fill="#ccc"></polygon></svg>`;
      }
  }
  return starsHTML;
}

function getComponentNameByName(name) {
  for (const category of Object.keys(components)) {
      const component = components[category].find(comp => comp.name === name);
      if (component) return component.name;
  }
  return 'Composant';
}

window.shareSocial = function() {
  console.log("Sharing on social media...");
}

window.viewInAR = function() {
  console.log("Opening AR view...");
}

window.viewReviews = viewReviews;

updateComponentList();
updateBrandFilter();
initThemeSelector();
init3DView();
initFinancingCalculator();
initFilters();
initNewButtons();
loadConfigurationFromURL();
fetchReviews();

document.querySelectorAll('.nav-tabs a').forEach(tab => {
  tab.addEventListener('click', (e) => {
      e.preventDefault();
      const href = e.target.getAttribute('href');
      if (!href) return;

      currentCategory = href.substring(1);
      filteredComponents = [...components[currentCategory]];
      updateBrandFilter();
      updateComponentList();
  });
});

window.onclick = function(event) {
  const modal = document.getElementById('comparisonModal');
  if (event.target == modal) {
      modal.style.display = "none";
  }

  const reviewModal = document.getElementById('reviewModal');
  if (event.target == reviewModal) {
      reviewModal.style.display = "none";
  }
}

window.generatePDF = function() {
  console.log("Generating PDF...");
}

const reviewModalElement = document.getElementById('reviewModal');
if (reviewModalElement) {
  reviewModalElement.querySelector('.close-modal').addEventListener('click', closeReviewModal);
  reviewModalElement.querySelector('.review-form').addEventListener('submit', submitReview);
}

window.openReviewModal = openReviewModal;
});
</script>
<style>
#budget-chart,
.performance-widget,
.summary-3d-view,
.summary-actions,
.financing-calculator {
display: none;
}
</style>
</head>
<body>
<header>
<div class="container">
<div class="header-content">
<h1><i class="fas fa-desktop header-icon"></i>QMD - Configurateur PC</h1>
</div>
<div class="progress-bar">
<div class="progress"></div>
</div>
</div>
</header>

<nav>
<div class="container">
<ul class="nav-tabs">
<li><a href="#cpu"><i class="fas fa-microchip"></i>CPU</a></li>
<li><a href="#motherboard"><i class="fas fa-server"></i>Carte mre</a></li>
<li><a href="#ram"><i class="fas fa-memory"></i>RAM</a></li>
<li><a href="#gpu"><i class="fas fa-tv"></i>GPU</a></li>
<li><a href="#storage"><i class="fas fa-hdd"></i>Stockage</a></li>
<li><a href="#psu"><i class="fas fa-plug"></i>Alimentation</a></li>
<li><a href="#case"><i class="fas fa-desktop"></i>Botier</a></li>
<li><a href="#cooling"><i class="fas fa-fan"></i>Refroidissement</a></li>
</ul>
</div>
</nav>

<main>
<div class="component-list">
<div class="filters">
<input type="text" class="search-bar" placeholder="Rechercher un composant..." aria-label="Rechercher un composant">
<div class="filter-options">
<select name="brand" id="brandFilter" aria-label="Filtrer par marque">
  <option>Filtrer par marque</option>
</select>
<select name="price" aria-label="Filtrer par prix">
  <option>Filtrer par prix</option>
  <option>Moins de 100</option>
  <option>100 - 500</option>
  <option>Plus de 500</option>
</select>
</div>
<div class="sort-options">
<select name="sort" aria-label="Trier par">
  <option>Trier par</option>
  <option>Prix croissant</option>
  <option>Prix dcroissant</option>
</select>
</div>
</div>
<div class="components-grid">
</div>
</div>

<style>
#budget-chart,
.performance-widget,
.summary-3d-view,
.summary-actions,
.financing-calculator {
display: none;
}
</style>

<div class="configuration-summary">
<h2>Rsum de la configuration</h2>
<ul class="selected-components">
</ul>
<div class="total-price">Total: 0.00</div>
<div class="summary-buttons">
<button id="order-button"><i class="fas fa-shopping-cart"></i> Commander</button>
<div id="budget-chart"></div>
<div class="performance-widget">
<h3>Performance estime</h3>
<div class="performance-score">0</div>
<div class="performance-categories">
  <div class="performance-category">
      <i class="fas fa-gamepad"></i>
      <p>Jeux</p>
  </div>
  <div class="performance-category">
      <i class="fas fa-video"></i>
      <p>Vido</p>
  </div>
  <div class="performance-category">
      <i class="fas fa-code"></i>
      <p>Dev</p>
  </div>
</div>
<div class="game-fps">
  <div>
      <svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">
          <circle cx="16" cy="16" r="16" fill="#3498db"></circle>
          <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#fff" font-size="12px">CP</text>
      </svg>
      <span>0 FPS</span>
  </div>
  <div>
      <svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">
          <circle cx="16" cy="16" r="16" fill="#e74c3c"></circle>
          <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#fff" font-size="12px">FT</text>
      </svg>
      <span>0 FPS</span>
  </div>
  <div>
      <svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">
          <circle cx="16" cy="16" r="16" fill="#2ecc71"></circle>
          <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#fff" font-size="12px">MC</text>
      </svg>
      <span>0 FPS</span>
  </div>
</div>
</div>
<div class="summary-3d-view">
Vue 3D de la configuration
</div>
<div class="summary-actions">
<button onclick="window.shareSocial()"><i class="fas fa-share-alt"></i> Partager</button>
<button onclick="window.generatePDF()"><i class="fas fa-file-pdf"></i> Exporter PDF</button>
<button onclick="window.viewInAR()"><i class="fas fa-glasses"></i> Comparer</button>
</div>
<div class="financing-calculator">
<h3>Calculateur de financement</h3>
<input type="number" id="interest-rate" placeholder="Taux d'intrt (%)">
<input type="number" id="loan-term" placeholder="Dure du prt (mois)">
<button>Calculer</button>
<div class="monthly-payment">Mensualit: 0.00</div>
</div>
</div>
</div>

<div class="reviews-section" id="reviews">
</div>
</main>

<div class="theme-selector">
<i class="fas fa-palette"></i>
</div>

<div class="theme-options">
<div class="theme-option" data-theme="default">
<div class="theme-color" style="background-color: #1e3a5f;"></div>
<span>Dfaut</span>
</div>
<div class="theme-option" data-theme="dark">
<div class="theme-color" style="background-color: #1a1a1a;"></div>
<span>Sombre</span>
</div>
<div class="theme-option" data-theme="light">
<div class="theme-color" style="background-color: #f0f0f0;"></div>
<span>Clair</span>
</div>
<div class="custom-theme-inputs">
<input type="color" id="primary-color" value="#1e3a5f" title="Couleur primaire">
<input type="color" id="secondary-color" value="#3498db" title="Couleur secondaire">
<input type="color" id="accent-color" value="#e74c3c" title="Couleur d'accent">
</div>
</div>

<div id="comparisonModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
<div class="modal-content" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); background:#fff; padding:2rem; border-radius:1rem; width:90%; max-width:800px;">
</div>
</div>

<div id="reviewModal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1001;">
<div class="modal-content" style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); background:#fff; padding:2rem; border-radius:1rem; width:90%; max-width:500px;">
<span class="close-modal" style="position:absolute; top:10px; right:20px; font-size:2rem; cursor:pointer;">&times;</span>
<h2>Mettre une note</h2>
<form class="review-form">
<label for="rating">Note (1-5):</label>
<input type="number" name="rating" min="1" max="5" required>
<label for="review">Avis:</label>
<textarea name="review" required></textarea>
<button type="submit"><i class="fas fa-paper-plane"></i> Soumettre</button>
</form>
</div>
</div>
</body>
</html>
